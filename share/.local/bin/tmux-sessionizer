#!/bin/sh
case $# in
  0) start_directory=$(find $HOME -name ".*" -prune -o -type d -print | fzf) ;;
  1) start_directory="$1" ;;
  *)
    echo "Usage: $0 [START_DIRECTORY]"
    exit 1
    ;;
esac
session_name=$(basename $start_directory)

tmux new-session -ds $session_name -c $start_directory
tmux attach-session -t $session_name
tmux switch-client  -t $session_name
